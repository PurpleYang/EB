<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>手机详情</title>
		<link type="text/css" rel="stylesheet" href="css/details.css" />
		<link type="text/css" rel="stylesheet" href="css/magnifier.css" />
		<link type="text/css" rel="stylesheet" href="css/font-awesome-4.7.0/css/font-awesome.min.css">
		<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
		<script type="text/javascript" src="js/jquery.cookie.js"></script>
		<script type="text/javascript" src="js/cookie.js"></script>
		<!--<script type="text/javascript" src="js/gzyautoplay1.js"></script>-->
		<!--<script type="text/javascript" src="js/magnifier.js"></script>-->
	</head>

	<body>
		<div class="detailsfixsu">
			<div class="daohang">
				<ul>
					<li>
						<a href="index.html">小米商城</a>
					</li>
					<li>
						<a href="#">MIUI</a>
					</li>
					<li>
						<a href="#">IoT</a>
					</li>
					<li>
						<a href="#">云服务</a>
					</li>
					<li>
						<a href="#">水滴</a>
					</li>
					<li>
						<a href="#">金融</a>
					</li>
					<li>
						<a href="#">有品</a>
					</li>
					<li>
						<a href="#" style="border-right: none;">Select Region</a>
					</li>
					<li id="gouwucheli">
						<a id="gouwuche" href="shopcart.html" target="_blank"><i class="iconfont">&#xe634;</i><span>购物车(0)</span></a>
											<div class="gouwucheshangpin">
						<!--<div class="shoploading">购物车中还没有商品，赶紧选购吧！</div>-->
						<ul id="shopitem-list" class="clearfix">
							<li>
								<div class="clearfix shopitem">
									<a href="###" class="itemthumb">
										<img src="images/1s.jpg" />
									</a>
									<a href="###" class="itemname">红米5A 全网通版 3GB内存 32GB 铂银灰 32GB</a>
									<span class="itemprice">699元 × 1</span>
									<a href="javascript:void(0);" class="itemdel"><i class="iconfont">&#xe638;</i></a>
								</div>
							</li>
						</ul>
						<div class="shopbottom">
							<span class="shopbottom1">共
								<em>1</em> 件商品
								<span class="shopbottom2">
									<em style="font-size: 24px;line-height: 1;color: #ff6700;">699</em>元
								</span>
							</span>
							<a target="_blank" href="shopcart.html" class="addcart">去购物车结算</a>
						</div>
					</div>
					</li>
					<li id="you2">
						<a href="#" style="border-right: none;">消息通知</a>
					</li>
					<span id="currentuser">
                  	<li id="you1"><a href="login.html">注册</a></li>
                    <li id="you"><a href="login.html">登录</a></li>
                </span>
				</ul>
			</div>
			<!--<div>
			
			<div class="detailsfix"></div>
		</div>-->
			<div class="detailsbox" style="background: white;">
				<div class="mi">
					<!--<a href="#"><img class="mitu" src="images/MI.gif" /></a>-->
					<div class="shophead2" style="margin-top: 0;">
						<a href="index.html" class="shophead22" style="height: 48px;padding: 0;">
						</a>
					</div>
					<li>
						<a href="#">全部商品分类</a>
					</li>
					<li>
						<a href="#">小米手机</a>
					</li>
					<li>
						<a href="#">红米</a>
					</li>
					<li>
						<a href="#">笔记本</a>
					</li>
					<li>
						<a href="#">电视</a>
					</li>
					<li>
						<a href="#">盒子</a>
					</li>
					<li>
						<a href="#">新品</a>
					</li>
					<li>
						<a href="#">路由器</a>
					</li>
					<li>
						<a href="#">智能硬件</a>
					</li>
					<li>
						<a href="#">服务</a>
					</li>
					<li>
						<a href="#">社区</a>
					</li>
					<div style="display: inline" class="biaodan">
						<input type="submit" class="anniu iconfont" value="&#xe611;" />
						<input class="sousuo" type="text" id="sousuotext"/>
					</div>
				</div>
			</div>
			<div class="outer">
				<div class="detailsfix">
					<div class="detailsfix2">
						<div class="detailsfix3">
							<h2>红米5 Plus</h2>
							<div>
								<div class="left">
									<span class="detailsline">|</span>
									<a href="###">红米5</a>
								</div>
								<div class="right">
									<a href="###">概述</a>
									<span class="detailsline">|</span>
									<a href="###">F码通道</a>
									<span class="detailsline">|</span>
									<a href="###">用户评价</a>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="detailsfixinner">
					<div class="detailsfix2">
						<div class="detailsfix3">
							<h2>红米5 Plus</h2>
							<div>
								<div class="left">
									<span class="detailsline">|</span>
									<a href="###">红米5</a>
								</div>
								<div class="right">
									<a href="###">概述</a>
									<span class="detailsline">|</span>
									<a href="###">F码通道</a>
									<span class="detailsline">|</span>
									<a href="###">用户评价</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- 布局-->
		<div class="baoguo">
			<div class="zoom-box">
				<!-- 容器-->
				<div class="small-box">
					<!-- 小图片容器-->
					<img src="images/1m.jpg" alt="" />
					<div id="center"></div>
					<div class="square">
						<!--<img src="" alt="" />--></div>
					<!-- 鼠标选中框-->
					<div class="mask"></div>
					<!--鼠标悬浮位置 鼠标位置x,y的计算方式决定需要mask-->

				</div>
				<div class="img-list">
					<!-- 图片列表-->
					<ul>
						<li><img class="active" src="images/1s.jpg" alt="" data-small="images/1m.jpg" data-big="images/1b.jpg" /></li>
						<li><img src="images/2s.jpg" alt="" data-small="images/2m.jpg" data-big="images/2b.jpg" /></li>
						<!--<li><img src="images/3s.jpg" alt="" data-small="images/3m.jpg" data-big="images/3b.jpg" /></li>-->
						<!--<li><img src="images/4s.jpg" alt="" data-small="images/4m.jpg" data-big="images/4b.jpg" /></li>-->
					</ul>
				</div>
				<div class="big-box">
					<!-- 放大镜-->
					<img src="images/1b.jpg" alt="" />
				</div>
			</div>
			<div class="detailsnew">
				<h1 class="detailsnew1">红米5 Plus</h1>
				<p class="detailsnew2">
					<font color="#ff4a00">「米粉节，一起狂欢8！64GB直降50元」</font>全面屏 / 4000mAh大电量 / 前置柔光自拍 / 14nm骁龙八核处理器
				</p>
				<span class="detailsnew3">999元</span>
				<div class="detailsnew4">
					<div>
						<ul class="detailsnew5">
							<li>
								<span class="detailsnew6">赠品</span>
								<span class="detailsnew7">赠米粉卡</span>
							</li>
						</ul>
					</div>
				</div>
				<div style="margin-top: 30px;">
					<div class="detailsnew8">
						<ul>
							<li>
								红米5 Plus 3GB+32GB 黑色
								<span>  999元</span>
							</li>
							<li class="totalprice"> 总计 ：999元</li>
						</ul>
					</div>
				</div>
				<ul class="detailsnew9">
					<li onclick="add_cart(this)" data-addsimg="images/1m.jpg">
						<a href="javascript:void(0);" class="detailsnew10">加入购物车</a>
					</li>
				</ul>
			</div>
		</div>
		<div class="footer">
			<div class="service">
				<ul class="service1">
					<li>
						<a href="#">预约维修服务</a>
					</li>
					<li>
						<a href="#">7天无理由退货</a>
					</li>
					<li>
						<a href="#">15天免费换货</a>
					</li>
					<li>
						<a href="#">满150元包邮</a>
					</li>
					<li>
						<a href="#">520余家售后网点</a>
					</li>
				</ul>
			</div>
			<div class="links">
				<dl class="links1">
					<dt>帮助中心</dt>
					<dd>
						<a href="#">账户管理</a>
					</dd>
					<dd>
						<a href="#">购物指南</a>
					</dd>
					<dd>
						<a href="#">订单操作</a>
					</dd>
				</dl>
				<dl class="links1">
					<dt>帮助中心</dt>
					<dd>
						<a href="#">账户管理</a>
					</dd>
					<dd>
						<a href="#">购物指南</a>
					</dd>
					<dd>
						<a href="#">订单操作</a>
					</dd>
				</dl>
				<dl class="links1">
					<dt>帮助中心</dt>
					<dd>
						<a href="#">账户管理</a>
					</dd>
					<dd>
						<a href="#">购物指南</a>
					</dd>
					<dd>
						<a href="#">订单操作</a>
					</dd>
				</dl>
				<dl class="links1">
					<dt>帮助中心</dt>
					<dd>
						<a href="#">账户管理</a>
					</dd>
					<dd>
						<a href="#">购物指南</a>
					</dd>
					<dd>
						<a href="#">订单操作</a>
					</dd>
				</dl>
				<dl class="links1">
					<dt>帮助中心</dt>
					<dd>
						<a href="#">账户管理</a>
					</dd>
					<dd>
						<a href="#">购物指南</a>
					</dd>
					<dd>
						<a href="#">订单操作</a>
					</dd>
				</dl>
				<dl class="links1">
					<dt>帮助中心</dt>
					<dd>
						<a href="#">账户管理</a>
					</dd>
					<dd>
						<a href="#">购物指南</a>
					</dd>
					<dd>
						<a href="#">订单操作</a>
					</dd>
				</dl>
				<div class="rightcontent">
					<p class="phone">400-100-5678</p>
					<p class="address">周一至周日 8:00-18:00<br> （仅收市话费）
					</p>
					<a href="###" class="phone1">24小时在线客服</a>
				</div>
			</div>
		</div>
		<div class="banquan">
			<div style="width: 1252px;height: 57px;">
				<div class="logobottom"> 小米官网 </div>
				<div class="info1">
					<p class="info1_1">
						<a href="#">小米商城</a><span class="sep">|</span>
						<a href="#">MIUI</a><span class="sep">|</span>
						<a href="#">米家</a><span class="sep">|</span>
						<a href="#">米聊</a><span class="sep">|</span>
						<a href="#">多看</a><span class="sep">|</span>
						<a href="#">路由器</a><span class="sep">|</span>
						<a href="#">小米天猫店</a><span class="sep">|</span>
						<a href="#">隐私政策</a><span class="sep">|</span>
						<a href="#">问题反馈</a><span class="sep">|</span>
						<a href="#">Select Region</a>
					</p>
					<p>©
						<a href="#">mi.com</a> 京ICP证110507号
						<a href="#">京ICP备10046444号</a>
						<a href="#">京公网安备11010802020134号 </a>
						<a href="#">京网文[2014]0059-0009号</a> <br> 违法和不良信息举报电话：185-0130-1238，本网站所列数据，除特殊说明，所有数据均出自我司实验室测试
					</p>
				</div>
				<div class="info2">
					<a href="#"><img src="images/truste.png" /></a>
					<a href="#"><img src="images/v-logo-2.png" /></a>
					<a href="#"><img src="images/v-logo-1.png" /></a>
					<a href="#"><img src="images/v-logo-3.png" /></a>
					<a href="#"><img src="images/ba10428a4f9495ac310fd0b5e0cf8370.png" /></a>
				</div>
			</div>
			<div class="guanggao">探索黑科技，小米为发烧而生</div>
		</div>

	</body>
	<script>
		//获取要操作的元素
		var smallbox = document.querySelector('.small-box .mask');
		var smallimg = document.querySelector('.small-box img');
		var square = document.querySelector('.square');
		var bigbox = document.querySelector('.big-box');
		var bigimg = document.querySelector('.big-box img');
		var imgs = document.querySelectorAll('.img-list img');
		var imgArr = ["images/1m.jpg", "images/2m.jpg", "images/3m.jpg", "images/4m.jpg"];
		//鼠标经过图片列表显示被选中，实现图片切换
		for(var i = 0; i < imgs.length; i++) { //循环添加事件
			imgs[i].index = i; //此时的单个i只是代表了值
			imgs[i].onmouseover = function() {
				currentImage = imgArr[this.index];
				square.style.backgroundImage = "url(" + currentImage + ")";
				for(var j = 0; j < imgs.length; j++) {
					imgs[j].className = '';
				}
				this.className = 'active'; //先所有置空，再赋值红色边框
				//改变对应的图片链接
				smallimg.src = this.getAttribute('data-small'); //获取自定义属性值
				bigimg.src = this.getAttribute('data-big');
			}
		}
		//鼠标移入放大器显示并设置选中框的大小
		smallbox.onmouseover = function() {
			square.style.display = 'block';
			bigbox.style.display = 'block';
			center.style.display = "block";
			//位置w/smallimg.w = bigbox.w/bigimg.w
			//小镜的大小
			square.style.width = bigbox.offsetWidth * smallimg.offsetWidth / bigimg.offsetWidth + 'px';
			square.style.height = bigbox.offsetHeight * smallimg.offsetHeight / bigimg.offsetHeight + 'px';
		};
		//鼠标移出放大器隐藏
		smallbox.onmouseout = function() {
			square.style.display = 'none';
			bigbox.style.display = 'none';
			center.style.display = "none";
		};

		//放大器移动
		//获取鼠标的位置
		smallbox.onmousemove = function(e) {
			var e = e || event;
			//选中框中心点
			var x = e.offsetX - square.offsetWidth / 2;
			var y = e.offsetY - square.offsetHeight / 2;

			if(x < 0) {
				x = 0;
			}
			if(x > smallbox.offsetWidth - square.offsetWidth) {
				x = smallbox.offsetWidth - square.offsetWidth; //解决右边框超出
			}
			if(y < 0) {
				y = 0;
			}
			if(y > smallbox.offsetHeight - square.offsetHeight) {
				y = smallbox.offsetHeight - square.offsetHeight; //解决下边框超出
			}

			//给选中框定位
			square.style.left = x + 'px';
			square.style.top = y + 'px';
			square.style.backgroundPosition = -x + "px " + -y + "px";

			//给放大器定位  x/? = smallimg.w/bigimg.w
			bigimg.style.top = -y * bigimg.offsetWidth / smallimg.offsetWidth + 'px';
			bigimg.style.left = -x * bigimg.offsetHeight / smallimg.offsetHeight + 'px';

		};

//		//通过名称查找某个元素
//		function $(name) {
//			return document.querySelector(name);
//		}
//		//通过名称查找相同的一组数据
//		function $all(name) {
//			return document.querySelectorAll(name);
//		}


//出现的问题：不能自定义，会和jq冲突
	</script>

</html>
<script>
	//吸顶
	var tops = document.querySelector(".detailsfixsu");
	var nav = document.querySelector(".detailsfixinner");
	//  alert(tops.offsetHeight);
	window.onscroll = function() {
		var sTop = document.body.scrollTop || document.documentElement.scrollTop;
		if(sTop >= tops.offsetHeight) {
			//          nav.style.position = "fixed";
			//          nav.style.WebkitTransition=nav.style.transition = 'all 5s';
			//          nav.style.left = "0";
			nav.style.top = "0";
			nav.style.marginTop = "0";
			nav.style.boxShadow = "0px 5px 5px rgba(0,0,0,0.07)";
		} else {
			//          nav.style.position = "relative";
			//          nav.style.top = "139px";
			nav.style.top = "-10px";
			nav.style.marginTop = "-60px";
			nav.style.boxShadow = "none";
		}
	}
	//		alert(document.cookie);
	if(document.cookie) {
		var userstatus = $.cookie("username"); //取cookie中的值
		var loginstatus = $.cookie("loginstatus");
		var currentuser = document.getElementById("currentuser");

		if('loginstatus' && 'userstatus') { //一小时之内不用重复登录
			//  if($_GET['del']){ //清除cookie
			//      setcookie('username','',time()-3600);
			//      setcookie('password','',time()-3600); 
			//      setcookie('loginstatus','',time()-3600); 
			//      window.location.href="index.html";
			//  }
			//  $("#currentuser").innerHTML="'欢迎您''.$userstatus.''<a href="index.html?del=1">登出</a>'";//登录成功的状态
			//$("#currentuser").html(userstatus);
			currentuser.innerHTML = `<div id="currentuser">您好，${userstatus}&nbsp;<a href="currentuser.php?del=1">登出</a></div>`;
			//alert(userstatus);
			//  echo $user.' welcome, <a href="login.php?del=1">log out</a>';
		}
	}
	//alert('userstatus');
	    function add_cart(_this){

		var sname=$(_this).parent().parent().find("h1").text();
		alert(sname);
		var sprice=$(_this).parent().parent().find("span").text();
		var simg=$(_this).attr("data-addsimg");
//var sname=1;
	    	var ajax=new XMLHttpRequest();
		ajax.open("POST","additem.php",true);//
		ajax.setRequestHeader("Content-type","application/x-www-form-urlencoded");
		ajax.send("sname="+encodeURI(sname)+"&sprice="+sprice+"&simg="+simg);
		ajax.onreadystatechange=function(){
			if(ajax.status==200&&ajax.readyState==4){
				alert("已加入购物车");
//				var res=ajax.responseText;
//				switch(res){
//					case "1":
//						alert("存在");
//						break;
//					case "2":
//						alert("不存在");
//						break;
//				}
			}
		}
	   }
</script>